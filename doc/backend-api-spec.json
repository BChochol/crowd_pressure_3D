{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/v1/simulation/":{"post":{"tags":["crowd-pressure-controller"],"summary":"Creates a new simulation and returns its state.","description":"Creates a new simulation and returns its state. The operation may fail if the request contains invalid parameters.","operationId":"CreateSimulation","requestBody":{"description":"The definition of simulation parameters.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSimulationRequestDto"}}},"required":true},"responses":{"200":{"description":"OK response with the current state of the simulation if it was created.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseSimulationDto"}}}},"404":{"description":"BadRequest response if any of the parameter is invalid. Each parameter has to be non-negative and there has to be at least one road. Each road has to have exactly one crossing defined. There has to be at least one agent group.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseSimulationDto"}}}},"500":{"description":"ServerSide error if the simulation couldn't be initialized.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseSimulationDto"}}}}}}},"/api/v1/simulation/{simulationId}/step":{"patch":{"tags":["crowd-pressure-controller"],"summary":"Executes given amount of steps in a given simulation.","description":"Executes given amount of steps in a given simulation and returns its latest state. Doesn't make any effect if the simulation doesn't exist. The operation is synchronous and may take significant amount of time.","operationId":"StepSimulationById","parameters":[{"name":"simulationId","in":"path","description":"The id of the simulation to execute steps.","required":true,"schema":{"type":"string"}},{"name":"steps","in":"query","description":"The amount of steps to execute.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK response with the latest state of the simulation if it exist.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseOptionalSimulationDto"}}}},"500":{"description":"ServerSide error if the simulation cannot execute the given amount of steps.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseOptionalSimulationDto"}}}}}}},"/api/v1/simulation/{simulationId}/reset":{"patch":{"tags":["crowd-pressure-controller"],"summary":"Restarts the simulation to its beginning state.","description":"Restarts the simulation to its beginning state if the simulation exists.","operationId":"ResetSimulationById","parameters":[{"name":"simulationId","in":"path","description":"The id of the simulation to restart.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK response with the restarted state of the simulation if it existed.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseOptionalSimulationDto"}}}}}}},"/api/v1/simulation/{simulationId}":{"get":{"tags":["crowd-pressure-controller"],"summary":"Returns the current state of the simulation with given simulation id.","description":"Returns the current state of the simulation with given simulation id if the simulation exists. Otherwise returns null.","operationId":"GetSimulationById","parameters":[{"name":"simulationId","in":"path","description":"The id of the simulation to return.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK response with the current state of the simulation if it exists.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseOptionalSimulationDto"}}}}}},"delete":{"tags":["crowd-pressure-controller"],"summary":"Deletes the simulation by the id and return its last state.","description":"Deletes the simulation by the id and return its last state. Doesn't have any effect when the simulation doesn't exist.","operationId":"DeleteSimulationById","parameters":[{"name":"simulationId","in":"path","description":"The id of the simulation to delete.","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK response with the last state of the simulation if it existed.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HTTPResponseOptionalSimulationDto"}}}}}}}},"components":{"schemas":{"AgentGroupDto":{"type":"object","properties":{"startCenter":{"$ref":"#/components/schemas/PointDto"},"startRadius":{"type":"number","format":"double"},"destination":{"$ref":"#/components/schemas/PointDto"},"destinationRadius":{"type":"number","format":"double"},"groupSize":{"type":"integer","format":"int32"}}},"CreateSimulationRequestDto":{"type":"object","properties":{"roads":{"type":"array","items":{"$ref":"#/components/schemas/RoadDto"}},"agentGroups":{"type":"array","items":{"$ref":"#/components/schemas/AgentGroupDto"}},"simulationWidth":{"type":"integer","format":"int32"},"simulationHeight":{"type":"integer","format":"int32"},"scaleCoefficient":{"type":"number","format":"double"},"destinationRadius":{"type":"number","format":"double"},"timeQuantum":{"type":"number","format":"double"}}},"CrossingDto":{"type":"object","properties":{"start":{"$ref":"#/components/schemas/PointDto"},"end":{"$ref":"#/components/schemas/PointDto"},"width":{"type":"number","format":"double"}}},"PointDto":{"type":"object","properties":{"x":{"type":"number","format":"double"},"y":{"type":"number","format":"double"}}},"RoadDto":{"type":"object","properties":{"start":{"$ref":"#/components/schemas/PointDto"},"end":{"$ref":"#/components/schemas/PointDto"},"width":{"type":"number","format":"double"},"crossing":{"$ref":"#/components/schemas/CrossingDto"}}},"AgentDto":{"type":"object","properties":{"position":{"$ref":"#/components/schemas/PointDto"},"agentDesiredPosition":{"$ref":"#/components/schemas/PointDto"},"agentMass":{"type":"number","format":"double"},"agentRadius":{"type":"number","format":"double"},"agentVisionAngle":{"type":"number","format":"double"},"agentMaxVisionDistance":{"type":"number","format":"double"},"isStopped":{"type":"boolean"}}},"BoardDto":{"type":"object","properties":{"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"},"walls":{"type":"array","items":{"$ref":"#/components/schemas/WallDto"}}}},"ErrorResponse":{"type":"object","properties":{"message":{"type":"string"},"code":{"type":"string","enum":["CRITICAL_ERROR","UNKNOWN_ERROR","SIMULATION_ERROR"]}}},"HTTPResponseSimulationDto":{"type":"object","properties":{"response":{"$ref":"#/components/schemas/OkResponseSimulationDto"},"errors":{"$ref":"#/components/schemas/ErrorResponse"}}},"OkResponseSimulationDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/SimulationDto"}}},"SimulationDto":{"type":"object","properties":{"simulationId":{"type":"string"},"board":{"$ref":"#/components/schemas/BoardDto"},"agents":{"type":"array","items":{"$ref":"#/components/schemas/AgentDto"}}}},"WallDto":{"type":"object","properties":{"start":{"$ref":"#/components/schemas/PointDto"},"end":{"$ref":"#/components/schemas/PointDto"}}},"HTTPResponseOptionalSimulationDto":{"type":"object","properties":{"response":{"$ref":"#/components/schemas/OkResponseOptionalSimulationDto"},"errors":{"$ref":"#/components/schemas/ErrorResponse"}}},"OkResponseOptionalSimulationDto":{"type":"object","properties":{"body":{"$ref":"#/components/schemas/SimulationDto"}}}}}}